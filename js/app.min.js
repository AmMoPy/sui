import{initializeEventListeners}from"./events.min.js";import{state,initializeState}from"./state.min.js";import{verifyStorage,getDB}from"./database.min.js";import{loadItems}from"./playlist.min.js";import{updateMediaSession}from"./playback.min.js";import{lightMode,showStatusMessage,handleResponsiveLayout}from"./ui.min.js";async function initializeApp(){try{initializeState();lightMode();handleResponsiveLayout();initializeEventListeners();await verifyStorage();await getDB();await loadItems(false);updateMediaSession();if("serviceWorker"in navigator){navigator.serviceWorker.register("/sw.js",{scope:"/"}).then((registration=>{console.log("Service worker registration success:",registration)})).catch((err=>{console.warn("Service worker registration failed:",err)}))}window.addEventListener("resize",handleResponsiveLayout);window.addEventListener("orientationchange",handleResponsiveLayout);showStatusMessage("Player ready","success")}catch(error){console.error("App initialization failed:",error);showStatusMessage("Failed to initialize app. Please reload.","error")}}document.addEventListener("DOMContentLoaded",initializeApp);export{initializeApp};