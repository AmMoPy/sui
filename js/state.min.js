import{handleSongEnd}from"./playback.min.js";const state={audio:new Audio,currentIndex:0,currentAudioUrl:null,items:[],selectedItems:new Set,isPlaylistVisible:false,defaultItemIds:[],defaultsInitialized:false,defaultsDeleted:false,speechEnabled:true,sortPreferences:{field:"name",direction:"asc"},colorMode:parseInt(localStorage.getItem("colorMode"))||0};state.audio.addEventListener("ended",handleSongEnd);function initializeState(){state.defaultsInitialized=localStorage.getItem("defaultsInitialized")==="true";state.defaultsDeleted=localStorage.getItem("defaultsDeleted")==="true";state.isPlaylistVisible=localStorage.getItem("playlistVisible")==="true";state.speechEnabled=localStorage.getItem("speechEnabled")!=="false";const savedSortPrefs=localStorage.getItem("sortPreferences");state.sortPreferences=savedSortPrefs?JSON.parse(savedSortPrefs):{field:"name",direction:"asc"}}function saveState(){localStorage.setItem("defaultsInitialized",state.defaultsInitialized);localStorage.setItem("defaultsDeleted",state.defaultsDeleted);localStorage.setItem("playlistVisible",state.isPlaylistVisible);localStorage.setItem("speechEnabled",state.speechEnabled);localStorage.setItem("sortPreferences",JSON.stringify(state.sortPreferences));localStorage.setItem("colorMode",state.colorMode)}export{state,initializeState,saveState};